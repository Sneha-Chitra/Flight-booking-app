{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Flights=function Flights(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),userDetails=_useState2[0],setUserDetails=_useState2[1];useEffect(function(){fetchUserData();},[]);var fetchUserData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var id;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;id=localStorage.getItem('userId');_context.next=4;return axios.get(\"http://localhost:6001/fetch-user/\".concat(id)).then(function(response){setUserDetails(response.data);console.log(response.data);});case 4:_context.next=8;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);case 8:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function fetchUserData(){return _ref.apply(this,arguments);};}();var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),flights=_useState4[0],setFlights=_useState4[1];var navigate=useNavigate();var fetchFlights=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get('http://localhost:6001/fetch-flights').then(function(response){setFlights(response.data);console.log(response.data);});case 2:case\"end\":return _context2.stop();}},_callee2);}));return function fetchFlights(){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchFlights();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"allFlightsPage\",children:userDetails?/*#__PURE__*/_jsx(_Fragment,{children:userDetails.approval==='not-approved'?/*#__PURE__*/_jsxs(\"div\",{className:\"notApproved-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Approval Required!!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your application is under processing. It needs an approval from the administrator. Kindly please be patience!!\"})]}):userDetails.approval==='approved'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All Flights\"}),/*#__PURE__*/_jsx(\"div\",{className:\"allFlights\",children:flights.filter(function(flight){return flight.flightName===localStorage.getItem('username');}).map(function(Flight){return/*#__PURE__*/_jsxs(\"div\",{className:\"allFlights-Flight\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"_id:\"}),\" \",Flight._id]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Flight Id:\"}),\" \",Flight.flightId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Flight name:\"}),\" \",Flight.flightName]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Starting station:\"}),\" \",Flight.origin]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Departure time:\"}),\" \",Flight.departureTime]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Destination:\"}),\" \",Flight.destination]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Arrival time:\"}),\" \",Flight.arrivalTime]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Base price:\"}),\" \",Flight.basePrice]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Total seats:\"}),\" \",Flight.totalSeats]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return navigate(\"/edit-flight/\".concat(Flight._id));},children:\"Edit details\"})})]},Flight._id);})})]}):\"\"}):\"\"});};export default Flights;","map":{"version":3,"names":["axios","React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Flights","_useState","_useState2","_slicedToArray","userDetails","setUserDetails","fetchUserData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","wrap","_callee$","_context","prev","next","localStorage","getItem","get","concat","then","response","data","console","log","t0","stop","apply","arguments","_useState3","_useState4","flights","setFlights","navigate","fetchFlights","_ref2","_callee2","_callee2$","_context2","className","children","approval","filter","flight","flightName","map","Flight","_id","flightId","origin","departureTime","destination","arrivalTime","basePrice","totalSeats","onClick"],"sources":["C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/src/pages/Flights.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Flights = () => {\r\n  const [userDetails, setUserDetails] = useState();\r\n\r\n  useEffect(()=>{\r\n    fetchUserData();\r\n  }, [])\r\n\r\n  const fetchUserData = async () =>{\r\n    try{\r\n      const id = localStorage.getItem('userId');\r\n      await axios.get(`http://localhost:6001/fetch-user/${id}`).then(\r\n        (response)=>{\r\n          setUserDetails(response.data);\r\n          console.log(response.data);\r\n        }\r\n      )\r\n\r\n    }catch(err){\r\n\r\n    }\r\n  } \r\n\r\n  const [flights, setFlights] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  \r\n  const fetchFlights = async () =>{\r\n    await axios.get('http://localhost:6001/fetch-flights').then(\r\n      (response)=>{\r\n        setFlights(response.data);\r\n        console.log(response.data)\r\n      }\r\n      )\r\n    }\r\n    \r\n    useEffect(()=>{\r\n      fetchFlights();\r\n    }, [])\r\n\r\n  return (\r\n    <div className=\"allFlightsPage\">\r\n\r\n      {userDetails ?\r\n        <>\r\n          {userDetails.approval === 'not-approved' ?\r\n            <div className=\"notApproved-box\">\r\n              <h3>Approval Required!!</h3>\r\n              <p>Your application is under processing. It needs an approval from the administrator. Kindly please be patience!!</p>\r\n            </div>\r\n\r\n\r\n          : userDetails.approval === 'approved' ?\r\n            <>\r\n              <h1>All Flights</h1>\r\n  \r\n              <div className=\"allFlights\">\r\n\r\n                {flights.filter(flight=> flight.flightName === localStorage.getItem('username')).map((Flight)=>{\r\n                  return(\r\n\r\n                      <div className=\"allFlights-Flight\" key={Flight._id}>\r\n                        <p><b>_id:</b> {Flight._id}</p>\r\n                        <span>\r\n                          <p><b>Flight Id:</b> {Flight.flightId}</p>\r\n                          <p><b>Flight name:</b> {Flight.flightName}</p>\r\n                        </span>\r\n                        <span>\r\n                          <p><b>Starting station:</b> {Flight.origin}</p>\r\n                          <p><b>Departure time:</b> {Flight.departureTime}</p>\r\n                        </span>\r\n                        <span>\r\n                          <p><b>Destination:</b> {Flight.destination}</p>\r\n                          <p><b>Arrival time:</b> {Flight.arrivalTime}</p>\r\n                        </span>\r\n                        <span>\r\n                          <p><b>Base price:</b> {Flight.basePrice}</p>\r\n                          <p><b>Total seats:</b> {Flight.totalSeats}</p>\r\n                        </span>\r\n                        <div>\r\n                          <button className=\"btn btn-primary\" onClick={()=> navigate(`/edit-flight/${Flight._id}`)}>Edit details</button>\r\n                        </div>\r\n                      </div>\r\n                  )\r\n                })}\r\n              </div>\r\n            </>\r\n          :\r\n            \"\"\r\n          }\r\n        </>\r\n      :\r\n       \"\"\r\n      }\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Flights"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}